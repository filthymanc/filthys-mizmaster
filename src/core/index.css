/*
 * filthy's MizMaster
 * Copyright (C) 2026 the filthymanc
 *
 * This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Ensure mobile browsers (Chrome/Safari) calculate height based on dynamic viewport 
     so virtual keyboards shrink the app properly, instead of overlapping. */
  html, body {
    height: 100dvh;
    min-height: 100dvh;
    overflow: hidden;
    margin: 0;
  }

  #root {
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  /* 
   * ROOT DEFAULTS (Standard / "Mission Control" Navy)
   * Inspired by professional developer tools (e.g. GitHub Dark)
   */
  :root {
    --bg-canvas: 1 4 9;       /* Deepest background (behind panels) */
    --bg-frame: 13 17 23;      /* Main structural background */
    --bg-surface: 22 27 34;    /* Elevated elements (cards, inputs) */
    --bg-overlay: 22 27 34;    /* Modals, Dropdowns */

    --text-primary: 201 209 217;
    --text-secondary: 139 148 158;
    --text-tertiary: 72 79 88;

    --border-base: 48 54 61;
    --border-highlight: 139 148 158;

    /* Default Accent: Emerald */
    --color-brand: 16 185 129;
    --color-brand-dim: 6 95 70;
  }
}

/* 
  * THEME MODES
  * Moved outside @layer base to prevent Tailwind purging
  * logic when classes are added dynamically.
  */

/* Standard: Explicit Fallback */
body.mode-standard {
  --bg-canvas: 1 4 9;
  --bg-frame: 13 17 23;
  --bg-surface: 22 27 34;
  --bg-overlay: 22 27 34;

  --text-primary: 201 209 217;
  --text-secondary: 139 148 158;
  --text-tertiary: 100 116 139;

  --border-base: 48 54 61;
  --border-highlight: 139 148 158;
}

/* Carbon: Neutral Gray/Zinc */
body.mode-carbon {
  --bg-canvas: 9 9 11;
  --bg-frame: 24 24 27;
  --bg-surface: 39 39 42;
  --bg-overlay: 39 39 42;

  --text-primary: 250 250 250;
  --text-secondary: 161 161 170;
  --text-tertiary: 113 113 122;

  --border-base: 63 63 70;
  --border-highlight: 82 82 91;
}

/* OLED: Pure Black */
body.mode-oled {
  --bg-canvas: 0 0 0;
  --bg-frame: 0 0 0;
  --bg-surface: 15 15 15;
  --bg-overlay: 20 20 20;

  --text-primary: 228 228 231;
  --text-secondary: 161 161 170;
  --text-tertiary: 113 113 122;

  --border-base: 71 71 75;
  --border-highlight: 113 113 122;
}

/* Paper: Light Mode */
body.mode-paper {
  --bg-canvas: 244 244 245; /* Zinc-100: Deeper neutral background for contrast */
  --bg-frame: 255 255 255;  /* Pure White for the main frame (Sidebar, Header) */
  --bg-surface: 248 250 252; /* Slate-50: Very subtle distinct panels/inputs */
  --bg-overlay: 255 255 255; /* Modals */

  --text-primary: 24 24 27;   /* Zinc-900: Near black */
  --text-secondary: 82 82 91; /* Zinc-600 */
  --text-tertiary: 113 113 122; /* Zinc-500: Darkened for readability */

  --border-base: 212 212 216; /* Zinc-300: Stronger outline for cards */
  --border-highlight: 161 161 170; /* Zinc-400 */
}

/* 
 * TACTICAL THEMES
 */

/* Green Camo (Woodland/NATO) */
body.mode-green-camo {
  --bg-canvas: 20 31 22;    /* Very Deep Forest Green (Black-Green) */
  --bg-frame: 34 48 36;     /* Dark Olive Drab */
  --bg-surface: 46 61 48;   /* Faded Olive */
  --bg-overlay: 46 61 48;   /* Faded Olive */

  --text-primary: 229 231 235; /* Gray-200: Soft White */
  --text-secondary: 164 174 165; /* Desaturated Sage */
  --text-tertiary: 110 120 110;  /* Muted Green-Gray */

  --border-base: 68 83 70;      /* Olive border */
  --border-highlight: 134 148 136; /* Sage highlight */
}

/* Desert Camo (Coyote/OIF) */
body.mode-desert-camo {
  --bg-canvas: 41 37 36;    /* Stone-800: Deep Earth Brown */
  --bg-frame: 68 64 60;     /* Stone-700: Dark Coyote */
  --bg-surface: 87 83 78;   /* Stone-600: Faded Tan */
  --bg-overlay: 87 83 78;   /* Stone-600 */

  --text-primary: 250 250 249; /* Stone-50: Warm White */
  --text-secondary: 214 211 209; /* Stone-200: Pale Sand */
  --text-tertiary: 168 162 158;  /* Stone-400: Muted Earth */

  --border-base: 120 113 108;    /* Stone-500: Strong Earth Border */
  --border-highlight: 214 211 209; /* Stone-200: Sand Highlight */
}

/* Supercarrier (Flight Deck) */
body.mode-supercarrier {
  --bg-canvas: 15 23 42;    /* Slate-900: Deep Navy/Non-Skid */
  --bg-frame: 30 41 59;     /* Slate-800: Haze Gray */
  --bg-surface: 51 65 85;   /* Slate-700: Steel */
  --bg-overlay: 51 65 85;   /* Slate-700 */

  --text-primary: 241 245 249; /* Slate-100: Bright Steel */
  --text-secondary: 148 163 184; /* Slate-400: Muted Blue-Gray */
  --text-tertiary: 100 116 139;  /* Slate-500 */

  --border-base: 71 85 105;      /* Slate-600 */
  --border-highlight: 148 163 184; /* Slate-400 */
}

/* --- ACCENT COLORS --- */
/* Optimized for high contrast against dark backgrounds */

body.accent-cyan {
  --color-brand: 34 211 238;   /* Cyan 400 */
  --color-brand-dim: 8 145 178; /* Cyan 600 */
}

body.accent-amber {
  --color-brand: 251 191 36;   /* Amber 400 */
  --color-brand-dim: 217 119 6; /* Amber 600 */
}

body.accent-rose {
  --color-brand: 251 113 133;  /* Rose 400 */
  --color-brand-dim: 225 29 72; /* Rose 600 */
}

body.accent-violet {
  --color-brand: 167 139 250;  /* Violet 400 */
  --color-brand-dim: 124 58 237; /* Violet 600 */
}

body.accent-emerald {
  --color-brand: 52 211 153;   /* Emerald 400 */
  --color-brand-dim: 5 150 105; /* Emerald 600 */
}

/* --- LIGHT MODE ACCENT OVERRIDES --- */
/* 
   Because Paper mode has a white/light background, 400-level bright 
   accents (like bright cyan or bright emerald) fail WCAG contrast ratios 
   and look washed out. Here, we swap the variables so `--color-brand` 
   uses the darker, 600-level 'dim' variant for primary UI elements.
*/
body.mode-paper.accent-cyan {
  --color-brand: 8 145 178;    /* Cyan 600 */
  --color-brand-dim: 21 94 117; /* Cyan 800 */
}

body.mode-paper.accent-amber {
  --color-brand: 217 119 6;    /* Amber 600 */
  --color-brand-dim: 146 64 14; /* Amber 800 */
}

body.mode-paper.accent-rose {
  --color-brand: 225 29 72;    /* Rose 600 */
  --color-brand-dim: 159 18 57; /* Rose 800 */
}

body.mode-paper.accent-violet {
  --color-brand: 124 58 237;   /* Violet 600 */
  --color-brand-dim: 91 33 182; /* Violet 800 */
}

body.mode-paper.accent-emerald {
  --color-brand: 5 150 105;    /* Emerald 600 */
  --color-brand-dim: 6 78 59;  /* Emerald 900 */
}

/* Custom Scrollbar - Critical for WebKit browsers */
@layer utilities {
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: rgb(var(--border-base));
    border-radius: 3px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: rgb(var(--border-highlight));
  }
}
